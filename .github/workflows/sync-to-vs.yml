name: Sync to Visual Studio

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

jobs:
  sync-to-vs:
    runs-on: self-hosted  # –ë—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ –≤–∞—à–µ–º Linux runner
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Display repository contents
      run: |
        echo "üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:"
        ls -la
        echo ""
        echo "üìÑ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:"
        git log -1 --name-status --oneline
        
    - name: Setup SSH for Windows sync (–ø—Ä–∏–º–µ—Ä)
      run: |
        echo "–ó–¥–µ—Å—å –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Windows"
        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSH –∫–ª—é—á:
        # mkdir -p ~/.ssh
        # echo "${{ secrets.SSH_PRIVATE_KEY }}" > ~/.ssh/id_rsa
        # chmod 600 ~/.ssh/id_rsa
        
    - name: Notify sync completion
      run: |
        echo "‚úÖ –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω –Ω–∞ runner"
        echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $PWD"
        echo "üîÑ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Windows"
