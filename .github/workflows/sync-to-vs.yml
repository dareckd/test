name: Deploy Website

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: self-hosted
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v3
      
    - name: üöÄ Deploy to web server
      run: |
        echo "–ù–∞—á–∏–Ω–∞—é –¥–µ–ø–ª–æ–π..."
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ index.html
        if [ -f "index.html" ]; then
          echo "‚úÖ index.html –Ω–∞–π–¥–µ–Ω, –∫–æ–ø–∏—Ä—É—é..."
          sudo cp -v index.html /var/www/html/
          echo "‚úÖ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ /var/www/html/"
        else
          echo "‚ùå index.html –Ω–µ –Ω–∞–π–¥–µ–Ω!"
          exit 1
        fi
        
    - name: ‚úÖ Verify
      run: |
        echo "–ü—Ä–æ–≤–µ—Ä—è—é –¥–µ–ø–ª–æ–π..."
        if [ -f "/var/www/html/index.html" ]; then
          echo "üéâ –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω!"
          echo "–°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞"
        else
          echo "‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–π–ª –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª—Å—è"
          exit 1
        fi
